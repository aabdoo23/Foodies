@model IEnumerable<Restaurant>
<head>
    <title>Restaurant List</title>
    <link rel="stylesheet" href="~/css/restaurant.css">

</head>

<body>
    <div class="restaurant-list">
        <h1>Restaurants</h1>
        <div class="restaurant-cards">

                    
            @foreach (var restaurant in Model)
            {


                <div class="restaurant-card">

                    <img src="@restaurant.Photo" alt="@restaurant.Name" class="restaurant-image" />
                    <div class="restaurant-info">
                        <h2 class="restaurant-name">@restaurant.Name</h2>
                        <a asp-controller="Menu" asp-action="Index" asp-route-restaurantId="@restaurant.Id" class="view-menu-btn">View Menu</a>
                    </div>
                </div>
                     <div class="rating-container">
                    <button class="btn btn-warning btn-sm rate-restaurant" data-restaurant-id="@restaurant.Id">Rate Restaurant</button>
                    <div class="rating-input" style="display: none;">
                        <input type="number" min="1" max="5" step="0.1" placeholder="Rate (1-5)" class="form-control" />
                        <button class="btn btn-primary submit-rating" data-restaurant-id="@restaurant.Id">Submit</button>
                    </div>
                    </div>
            }

        </div>
    </div>
</body>
<style>
    ﻿body {
    font-family: 'Arial', sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f4f4f4;
}

.restaurant-list {
    padding: 20px;
}

    .restaurant-list h1 {
        text-align: center;
        margin-bottom: 20px;
        color: #1E1E24;
    }

.restaurant-cards {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
}

.restaurant-card {
    background-color: white;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    width: 250px;
    position: relative;
    text-align: center;
}

    .restaurant-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }

.restaurant-image {
    width: 100%;
    height: 150px; 
    object-fit: cover; 
}

.restaurant-info {
    padding: 15px;
}

.restaurant-name {
    margin: 10px 0;
    font-size: 20px;
    color: #1E1E24;
}

.view-menu-btn {
    display: inline-block;
    padding: 10px 20px;
    background-color: #2EBFA5;
    color: white;
    border: none;
    border-radius: 25px;
    text-decoration: none;
    font-weight: bold;
    transition: background-color 0.3s, transform 0.2s;
}

    .view-menu-btn:hover {
        background-color: #048A81;
        transform: scale(1.05);
    }

    media (max-width: 768px) {
    .restaurant-card {
        width: 100%;
    }
}
</style>
<script>
    ﻿document.addEventListener('DOMContentLoaded', function () {
    const rateButtons = document.querySelectorAll('.rate-restaurant');

    rateButtons.forEach(button => {
        button.addEventListener('click', function () {
            const ratingInput = this.nextElementSibling;
            ratingInput.style.display = ratingInput.style.display === 'none' ? 'block' : 'none';
        });
    });

    const submitButtons = document.querySelectorAll('.submit-rating');

    submitButtons.forEach(button => {
        button.addEventListener('click', async function () {
            const restaurantId = this.getAttribute('data-restaurant-id');
            const ratingValue = this.previousElementSibling.value;

            if (ratingValue) {
                const response = await fetch(`/Menu/AddRating`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ RestaurantId: restaurantId, Rate: parseFloat(ratingValue) })
                });

                if (response.ok) {
                    alert('Thank you for your rating!');
                    location.reload();
                } else {
                    alert('An error occurred while submitting your rating.');
                }
            } else {
                alert('Please enter a rating.');
            }
        });
    });
});
</script>