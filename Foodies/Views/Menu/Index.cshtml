@model MenuViewModel

<head>
    <title>Restaurant Menu</title>
    <link rel="stylesheet" href="~/css/Menu.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <header class="header">
        <div class="user-info">
            <img src="/assets/images/menu/user.png" alt="User Avatar">
            <span>Me ▼</span>
            <div class="cart">
                <img src="/assets/images/menu/cart_icon.png" alt="Cart">
                <span>(0)</span>
            </div>
        </div>
        <a asp-controller="Menu" asp-action="Restaurant" class="back-btn">Back to Restaurants</a>
    </header>

    <div class="container">
        <div class="main-content">
            <div class="restaurant-info">
                <img src="@Model.Restaurant.Photo" alt="Restaurant Logo">
                <div class="restaurant-details">
                    <h1>@Model.Restaurant.Name</h1>
                    <p>Open 24 Hours | Delivery time: 40 minutes | Delivered by: Foodies</p>
                </div>
                <div class="restaurant-rating">
                    <p>Rating: 4.5</p>
                </div>
            </div>

            <div class="category-filters">
                @foreach (var category in Model.Categories)
                {
                    <button class="category-btn @(category == Model.SelectedCategory ? "active" : "")" data-category="@category">@category</button>
                }
            </div>

            <div id="menu-container">
                @await Html.PartialAsync("_MenuItems", Model.MenuItems)
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            $('.category-btn').click(function (e) {
                e.preventDefault();
                var category = $(this).data('category');
                var restaurantId = '@Model.Restaurant.Id';

                $('.category-btn').removeClass('active');
                $(this).addClass('active');

                $.ajax({
                    url: '@Url.Action("LoadMenuItems", "Menu")',
                    data: { restaurantId: restaurantId, category: category },
                    success: function (data) {
                        $('#menu-container').html(data);
                    }
                });
            });
        });
    </script>
</body>
